<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planetary Soundwaves - AI Art Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        header {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 2rem 1rem 1rem;
        }

        h1 {
            font-size: 2.5rem;
            letter-spacing: 0.3rem;
            text-transform: uppercase;
            background: linear-gradient(45deg, #c4b5fd 0%, #fbbf24 50%, #f9a8d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 0.9rem;
            color: #a5b4fc;
            letter-spacing: 0.15rem;
        }

        .container {
            position: relative;
            z-index: 5;
            max-width: 1800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .solar-system {
            position: relative;
            width: 100%;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 3rem 0;
        }

        .sun {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ffd700, #ff8c00, #ff4500);
            box-shadow: 0 0 80px #ffa500, 0 0 120px #ff6347, 0 0 160px #ff4500;
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 100;
            animation: sunPulse 4s infinite;
        }

        @keyframes sunPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .sun:hover {
            transform: scale(1.15) !important;
            box-shadow: 0 0 100px #ffa500, 0 0 150px #ff6347, 0 0 200px #ff4500;
        }

        .sun.active {
            box-shadow: 0 0 120px #ffa500, 0 0 180px #ff6347, 0 0 240px #ff4500;
        }

        .orbit {
            position: absolute;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            pointer-events: none;
        }

        .planet-container {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .planet-container:hover {
            transform: scale(1.2);
            z-index: 50;
        }

        .planet-container.active {
            transform: scale(1.3);
            z-index: 60;
        }

        .planet {
            border-radius: 50%;
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.5);
            position: relative;
            background-size: cover !important;
            background-position: center !important;
        }

        .planet-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            white-space: nowrap;
            color: #a5b4fc;
            text-shadow: 0 0 10px rgba(165,180,252,0.5);
            pointer-events: none;
        }

        .planet-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 130%;
            height: 130%;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .planet-container.active .planet-glow {
            opacity: 0.6;
        }

        /* Individual Planet Styles */
        .mercury { 
            width: 20px; 
            height: 20px;
            background: radial-gradient(circle at 30% 30%, #c8c8c8, #a0a0a0, #7a7a7a, #5a5a5a);
            box-shadow: inset -3px -3px 8px rgba(0,0,0,0.6), 0 0 15px rgba(200,200,200,0.3);
        }
        .mercury-glow { background: radial-gradient(circle, rgba(184,184,184,0.6), transparent); }

        .venus { 
            width: 28px; 
            height: 28px;
            background: radial-gradient(circle at 30% 30%, #fff5e1, #ffe4b3, #ffd89b, #ffcb7a, #e8a558);
            box-shadow: inset -3px -3px 10px rgba(0,0,0,0.4), 0 0 20px rgba(255,203,110,0.4);
        }
        .venus-glow { background: radial-gradient(circle, rgba(253,203,110,0.6), transparent); }

        .earth { 
            width: 30px; 
            height: 30px;
            background: 
                radial-gradient(circle at 35% 40%, 
                    rgba(255,255,255,0.3) 0%, transparent 30%),
                radial-gradient(circle at 30% 30%, #a8daff, #74b9ff, #4a9eff, #2e86de, #1e5f99, #0a3d62);
            box-shadow: inset -4px -4px 12px rgba(0,0,0,0.5), 0 0 25px rgba(116,185,255,0.4);
            position: relative;
        }
        .earth::before {
            content: '';
            position: absolute;
            width: 40%;
            height: 60%;
            background: radial-gradient(ellipse, #00b894 20%, transparent 70%);
            top: 20%;
            left: 50%;
            border-radius: 50%;
            opacity: 0.8;
        }
        .earth-glow { background: radial-gradient(circle, rgba(116,185,255,0.6), transparent); }

        .mars { 
            width: 24px; 
            height: 24px;
            background: radial-gradient(circle at 35% 35%, #ff9b8a, #ff7675, #ee5a52, #d63031, #a82a2a);
            box-shadow: inset -3px -3px 10px rgba(0,0,0,0.5), 0 0 18px rgba(255,118,117,0.3);
        }
        .mars-glow { background: radial-gradient(circle, rgba(255,118,117,0.6), transparent); }

        .jupiter { 
            width: 70px; 
            height: 70px;
            background: 
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 40%),
                linear-gradient(180deg, 
                    #f9ca24 0%, #f9ca24 12%,
                    #e8b44f 12%, #e8b44f 20%,
                    #ffeaa7 20%, #ffeaa7 28%,
                    #e17055 28%, #e17055 38%,
                    #fab1a0 38%, #fab1a0 48%,
                    #f9ca24 48%, #f9ca24 58%,
                    #d4915e 58%, #d4915e 68%,
                    #ffeaa7 68%, #ffeaa7 78%,
                    #e8b44f 78%, #e8b44f 88%,
                    #f9ca24 88%, #f9ca24 100%);
            border-radius: 50%;
            box-shadow: inset -6px -6px 20px rgba(0,0,0,0.4), 0 0 30px rgba(249,202,36,0.4);
        }
        .jupiter::after {
            content: '';
            position: absolute;
            width: 25%;
            height: 30%;
            background: radial-gradient(ellipse, rgba(255,100,80,0.6), rgba(220,80,60,0.4));
            top: 35%;
            left: 25%;
            border-radius: 50%;
            filter: blur(2px);
        }
        .jupiter-glow { background: radial-gradient(circle, rgba(249,202,36,0.6), transparent); }

        .saturn { 
            width: 60px; 
            height: 60px;
            background: 
                radial-gradient(circle at 32% 32%, rgba(255,255,255,0.3) 0%, transparent 40%),
                radial-gradient(circle at 30% 30%, #fffbea, #ffeaa7, #ffd97d, #fdcb6e, #e1a85f, #c89550);
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.4), 0 0 25px rgba(253,203,110,0.3);
        }
        .saturn::after {
            content: '';
            position: absolute;
            width: 110px;
            height: 22px;
            background: 
                linear-gradient(90deg, 
                    transparent 0%, 
                    rgba(253,203,110,0.3) 15%,
                    rgba(253,203,110,0.5) 30%,
                    rgba(253,203,110,0.6) 50%,
                    rgba(253,203,110,0.5) 70%,
                    rgba(253,203,110,0.3) 85%,
                    transparent 100%);
            border: 2px solid rgba(253,203,110,0.4);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(75deg);
            box-shadow: 0 0 15px rgba(253,203,110,0.4), inset 0 0 10px rgba(0,0,0,0.3);
        }
        .saturn-glow { background: radial-gradient(circle, rgba(253,203,110,0.6), transparent); }

        .uranus { 
            width: 45px; 
            height: 45px;
            background: 
                radial-gradient(circle at 33% 33%, rgba(255,255,255,0.2) 0%, transparent 40%),
                radial-gradient(circle at 30% 30%, #b2f5ea, #81ecec, #54d6d6, #00cec9, #00a8a8, #008c8c);
            box-shadow: inset -4px -4px 12px rgba(0,0,0,0.4), 0 0 22px rgba(129,236,236,0.4);
        }
        .uranus-glow { background: radial-gradient(circle, rgba(129,236,236,0.6), transparent); }

        .neptune { 
            width: 44px; 
            height: 44px;
            background: 
                radial-gradient(circle at 33% 33%, rgba(255,255,255,0.15) 0%, transparent 35%),
                radial-gradient(circle at 30% 30%, #6c9fff, #5584ff, #4a73e8, #3867d6, #2e5bbf, #1e3a8a);
            box-shadow: inset -4px -4px 12px rgba(0,0,0,0.5), 0 0 22px rgba(116,185,255,0.4);
        }
        .neptune-glow { background: radial-gradient(circle, rgba(116,185,255,0.6), transparent); }

        .visualization-area {
            position: relative;
            background: rgba(10,10,25,0.8);
            border: 2px solid rgba(165,180,252,0.2);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            margin-top: 2rem;
        }

        .vis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .vis-title {
            font-size: 1.5rem;
            color: #c4b5fd;
            letter-spacing: 0.1rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: 2px solid rgba(165,180,252,0.4);
            border-radius: 10px;
            background: rgba(30,30,50,0.8);
            color: #c4b5fd;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .btn:hover {
            border-color: #fbbf24;
            color: #fbbf24;
            box-shadow: 0 0 20px rgba(251,191,36,0.3);
        }

        #waveCanvas {
            width: 100%;
            height: 500px;
            border-radius: 15px;
            background: radial-gradient(ellipse at center, rgba(20,20,40,0.9) 0%, rgba(10,10,20,0.95) 100%);
        }

        .active-sounds {
            margin-top: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .sound-tag {
            padding: 0.6rem 1.2rem;
            background: rgba(196,181,253,0.15);
            border: 2px solid rgba(196,181,253,0.3);
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: #c4b5fd;
            transition: all 0.3s ease;
        }

        .sound-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.3); }
        }

        .remove-sound {
            cursor: pointer;
            opacity: 0.7;
            margin-left: 0.5rem;
        }

        .remove-sound:hover {
            opacity: 1;
            color: #fbbf24;
        }

        .info-panel {
            text-align: center;
            padding: 1.5rem;
            background: rgba(165,180,252,0.05);
            border-radius: 10px;
            color: #a5b4fc;
            font-size: 0.95rem;
            margin-top: 1.5rem;
            line-height: 1.6;
        }

        @media (max-width: 1024px) {
            .solar-system { height: 400px; }
            .sun { width: 80px; height: 80px; }
            .jupiter { width: 50px; height: 50px; }
            .saturn { width: 45px; height: 45px; }
            .uranus { width: 35px; height: 35px; }
            .neptune { width: 34px; height: 34px; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>

    <header>
        <h1>Planetary Soundwaves</h1>
        <p class="subtitle">AI-Powered Sonic Geometry from the Solar System</p>
    </header>

    <div class="container">
        <div class="solar-system" id="solarSystem">
            <div class="sun" onclick="toggleCelestial(0)" data-name="Sun" id="sunElement">
                <div class="planet-label">SUN</div>
            </div>
        </div>

        <div class="visualization-area">
            <div class="vis-header">
                <div class="vis-title">ðŸŒŠ Sound Wave Geometry</div>
                <div class="controls">
                    <button class="btn" onclick="clearWaves()">Clear</button>
                    <button class="btn" onclick="saveArt()">Save</button>
                    <button class="btn" onclick="toggleGeometry()" id="geoBtn">Geometric</button>
                </div>
            </div>
            
            <canvas id="waveCanvas"></canvas>
            
            <div class="active-sounds" id="activeSounds"></div>
            
            <div class="info-panel">
                ðŸŽµ Click on celestial bodies to layer their sound signatures â€¢ Each creates unique wave patterns and geometric forms
            </div>
        </div>
    </div>

    <script>
        const celestialData = [
            { name: 'Sun', frequency: 126.22, color: '#ff8c00', info: 'Solar oscillations', image: '' },
            { name: 'Mercury', frequency: 144.72, color: '#b8b8b8', info: 'Solar wind interactions', image: '' },
            { name: 'Venus', frequency: 221.23, color: '#fdcb6e', info: 'Atmospheric radio emissions', image: '' },
            { name: 'Earth', frequency: 194.18, color: '#74b9ff', info: 'Magnetospheric chorus', image: '' },
            { name: 'Mars', frequency: 144.72, color: '#ff7675', info: 'Wind and atmospheric pressure', image: '' },
            { name: 'Jupiter', frequency: 183.58, color: '#f9ca24', info: 'Radio emissions and auroras', image: '' },
            { name: 'Saturn', frequency: 147.85, color: '#fdcb6e', info: 'Kilometric radiation', image: '' },
            { name: 'Uranus', frequency: 207.36, color: '#81ecec', info: 'Magnetic field oscillations', image: '' },
            { name: 'Neptune', frequency: 211.44, color: '#74b9ff', info: 'Plasma wave emissions', image: '' }
        ];

        // CUSTOM IMAGES: Add your planet image URLs here!
        // Example: 'images/mercury.png' if stored in GitHub repo
        // Or full URL: 'https://yoursite.com/mercury.png'
        const customImages = {
            'Sun': '',        // Leave empty to use default gradient, or add: 'images/sun.png'
            'Mercury': '',    // Add: 'images/mercury.png'
            'Venus': '',      // Add: 'images/venus.png'
            'Earth': '',      // Add: 'images/earth.png'
            'Mars': '',       // Add: 'images/mars.png'
            'Jupiter': '',    // Add: 'images/jupiter.png'
            'Saturn': '',     // Add: 'images/saturn.png'
            'Uranus': '',     // Add: 'images/uranus.png'
            'Neptune': ''     // Add: 'images/neptune.png'
        };

        const orbits = [
            { distance: 90, planets: [1] },
            { distance: 130, planets: [2] },
            { distance: 170, planets: [3] },
            { distance: 215, planets: [4] },
            { distance: 310, planets: [5] },
            { distance: 390, planets: [6] },
            { distance: 460, planets: [7] },
            { distance: 520, planets: [8] }
        ];

        let canvas, ctx, audioContext;
        let activeSounds = [];
        let geometricMode = true;
        let animationId;

        function init() {
            // Create starfield
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }

            // Create solar system
            const solarSystem = document.getElementById('solarSystem');
            
            // Apply custom sun image if provided
            const sunElement = document.getElementById('sunElement');
            const customSunImage = customImages['Sun'];
            if (customSunImage && customSunImage.trim() !== '') {
                sunElement.style.background = `url('${customSunImage}')`;
                sunElement.style.backgroundSize = 'cover';
                sunElement.style.backgroundPosition = 'center';
            }
            
            orbits.forEach(orbit => {
                const orbitEl = document.createElement('div');
                orbitEl.className = 'orbit';
                orbitEl.style.width = orbit.distance * 2 + 'px';
                orbitEl.style.height = orbit.distance * 2 + 'px';
                solarSystem.appendChild(orbitEl);

                orbit.planets.forEach(planetIndex => {
                    const angle = (Math.random() * 360) * Math.PI / 180;
                    const x = Math.cos(angle) * orbit.distance;
                    const y = Math.sin(angle) * orbit.distance;

                    const container = document.createElement('div');
                    container.className = 'planet-container';
                    container.style.left = `calc(50% + ${x}px)`;
                    container.style.top = `calc(50% + ${y}px)`;
                    container.style.transform = 'translate(-50%, -50%)';
                    container.onclick = () => toggleCelestial(planetIndex);

                    const planetName = celestialData[planetIndex].name.toLowerCase();
                    const customImage = customImages[celestialData[planetIndex].name];
                    
                    // Create planet div with custom image if provided
                    const planetDiv = document.createElement('div');
                    planetDiv.className = `planet ${planetName}`;
                    
                    // Apply custom image if URL is provided
                    if (customImage && customImage.trim() !== '') {
                        planetDiv.style.background = `url('${customImage}')`;
                        planetDiv.style.backgroundSize = 'cover';
                        planetDiv.style.backgroundPosition = 'center';
                    }

                    container.innerHTML = `
                        <div class="planet-glow ${planetName}-glow"></div>
                        <div class="planet-label">${celestialData[planetIndex].name.toUpperCase()}</div>
                    `;
                    
                    container.insertBefore(planetDiv, container.querySelector('.planet-label'));

                    solarSystem.appendChild(container);
                });
            });

            // Setup canvas
            canvas = document.getElementById('waveCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            startVisualization();
        }

        async function toggleCelestial(index) {
            const body = celestialData[index];
            const existingIndex = activeSounds.findIndex(s => s.name === body.name);

            if (existingIndex !== -1) {
                activeSounds[existingIndex].oscillator.stop();
                activeSounds[existingIndex].lfo.stop();
                activeSounds.splice(existingIndex, 1);
                
                if (index === 0) {
                    document.querySelector('.sun').classList.remove('active');
                } else {
                    document.querySelectorAll('.planet-container')[index - 1].classList.remove('active');
                }
            } else {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }

                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                const analyser = audioContext.createAnalyser();
                
                analyser.fftSize = 2048;
                
                oscillator.type = 'sine';
                oscillator.frequency.value = body.frequency;
                
                const lfo = audioContext.createOscillator();
                lfo.frequency.value = 0.2 + Math.random() * 0.3;
                const lfoGain = audioContext.createGain();
                lfoGain.gain.value = 10 + Math.random() * 15;
                
                lfo.connect(lfoGain);
                lfoGain.connect(oscillator.frequency);
                
                oscillator.connect(gainNode);
                gainNode.connect(analyser);
                analyser.connect(audioContext.destination);
                
                gainNode.gain.value = 0.12;
                
                oscillator.start();
                lfo.start();

                activeSounds.push({
                    name: body.name,
                    color: body.color,
                    analyser: analyser,
                    oscillator: oscillator,
                    lfo: lfo,
                    frequency: body.frequency,
                    phase: Math.random() * Math.PI * 2
                });

                if (index === 0) {
                    document.querySelector('.sun').classList.add('active');
                } else {
                    document.querySelectorAll('.planet-container')[index - 1].classList.add('active');
                }
            }

            updateSoundDisplay();
        }

        function updateSoundDisplay() {
            const container = document.getElementById('activeSounds');
            container.innerHTML = activeSounds.map((sound, i) => `
                <div class="sound-tag">
                    <div class="sound-indicator" style="background: ${sound.color};"></div>
                    ${sound.name}
                    <span class="remove-sound" onclick="toggleCelestial(${celestialData.findIndex(b => b.name === sound.name)})">âœ•</span>
                </div>
            `).join('');
        }

        function startVisualization() {
            const bufferLength = 1024;

            function draw() {
                animationId = requestAnimationFrame(draw);

                ctx.fillStyle = 'rgba(10, 10, 20, 0.08)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const time = Date.now() * 0.0005;

                activeSounds.forEach((sound, soundIndex) => {
                    const dataArray = new Uint8Array(bufferLength);
                    sound.analyser.getByteTimeDomainData(dataArray);

                    ctx.strokeStyle = sound.color;
                    ctx.lineWidth = 2;
                    ctx.globalAlpha = 0.7;

                    if (geometricMode) {
                        // Unique visualization for each celestial body
                        switch(sound.name) {
                            case 'Sun':
                                // Explosive radial bursts
                                for (let burst = 0; burst < 12; burst++) {
                                    const burstAngle = (burst / 12) * Math.PI * 2 + time;
                                    ctx.beginPath();
                                    for (let i = 0; i < 100; i++) {
                                        const t = i / 100;
                                        const dataIndex = Math.floor(t * bufferLength);
                                        const value = (dataArray[dataIndex] - 128) / 128;
                                        const r = 50 + t * 180 + value * 70 + Math.sin(time * 3 + t * 5) * 30;
                                        const a = burstAngle + t * 0.3;
                                        const x = centerX + Math.cos(a) * r;
                                        const y = centerY + Math.sin(a) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.strokeStyle = sound.color + '99';
                                    ctx.stroke();
                                }
                                break;

                            case 'Mercury':
                                // Fast, jittery orbits
                                for (let orbit = 0; orbit < 5; orbit++) {
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 2) {
                                        const angle = (i / bufferLength) * Math.PI * 2 + time * 2;
                                        const value = (dataArray[i] - 128) / 128;
                                        const jitter = Math.sin(i * 0.3 + time * 5) * 15;
                                        const r = 100 + orbit * 25 + value * 50 + jitter;
                                        const x = centerX + Math.cos(angle) * r;
                                        const y = centerY + Math.sin(angle) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.closePath();
                                    ctx.strokeStyle = sound.color + '88';
                                    ctx.stroke();
                                }
                                break;

                            case 'Venus':
                                // Thick, swirling atmospheric patterns
                                for (let swirl = 0; swirl < 8; swirl++) {
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 3) {
                                        const t = i / bufferLength;
                                        const value = (dataArray[i] - 128) / 128;
                                        const angle = t * Math.PI * 4 + time * 0.5 + (swirl * Math.PI / 4);
                                        const r = 120 + value * 90 + Math.sin(t * 8 + time * 2) * 40;
                                        const x = centerX + Math.cos(angle) * r + Math.sin(time + swirl) * 30;
                                        const y = centerY + Math.sin(angle) * r + Math.cos(time + swirl) * 30;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.strokeStyle = sound.color + '77';
                                    ctx.stroke();
                                }
                                break;

                            case 'Earth':
                                // Harmonious waves like ocean and wind
                                for (let wave = 0; wave < 6; wave++) {
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 1) {
                                        const angle = (i / bufferLength) * Math.PI * 2;
                                        const value = (dataArray[i] - 128) / 128;
                                        const r = 130 + wave * 30 + value * 60 + Math.sin(i * 0.15 + time * 2 + wave) * 25;
                                        const x = centerX + Math.cos(angle + time * 0.3) * r;
                                        const y = centerY + Math.sin(angle + time * 0.3) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.closePath();
                                    ctx.strokeStyle = sound.color + 'aa';
                                    ctx.stroke();
                                }
                                break;

                            case 'Mars':
                                // Angular, crystalline structures
                                for (let crystal = 0; crystal < 8; crystal++) {
                                    const baseAngle = (crystal / 8) * Math.PI * 2 + time * 0.4;
                                    ctx.beginPath();
                                    for (let i = 0; i < 50; i++) {
                                        const dataIndex = Math.floor((i / 50) * bufferLength);
                                        const value = (dataArray[dataIndex] - 128) / 128;
                                        const r = 100 + i * 3 + value * 60;
                                        const angleOffset = i % 2 === 0 ? 0.1 : -0.1;
                                        const a = baseAngle + angleOffset;
                                        const x = centerX + Math.cos(a) * r;
                                        const y = centerY + Math.sin(a) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.strokeStyle = sound.color + '99';
                                    ctx.stroke();
                                }
                                break;

                            case 'Jupiter':
                                // Massive, complex storm patterns
                                for (let storm = 0; storm < 4; storm++) {
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 2) {
                                        const t = i / bufferLength;
                                        const value = (dataArray[i] - 128) / 128;
                                        const angle = t * Math.PI * 6 + time * 0.4 + (storm * Math.PI / 2);
                                        const wobble = Math.sin(t * 12 + time * 2 + storm) * 50;
                                        const r = 150 + t * 120 + value * 80 + wobble;
                                        const x = centerX + Math.cos(angle) * r;
                                        const y = centerY + Math.sin(angle) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.strokeStyle = sound.color + '88';
                                    ctx.lineWidth = 3;
                                    ctx.stroke();
                                    ctx.lineWidth = 2;
                                }
                                break;

                            case 'Saturn':
                                // Elegant rings with gaps
                                for (let ring = 0; ring < 10; ring++) {
                                    if (ring === 4 || ring === 7) continue; // Cassini division gaps
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 1) {
                                        const angle = (i / bufferLength) * Math.PI * 2 + time * 0.2;
                                        const value = (dataArray[i] - 128) / 128;
                                        const r = 110 + ring * 18 + value * 30;
                                        const x = centerX + Math.cos(angle) * r;
                                        const y = centerY + Math.sin(angle) * r * 0.6; // Elliptical
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.closePath();
                                    ctx.strokeStyle = sound.color + (70 + ring * 10).toString(16);
                                    ctx.stroke();
                                }
                                break;

                            case 'Uranus':
                                // Tilted, unusual rotation patterns
                                for (let tilt = 0; tilt < 6; tilt++) {
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 2) {
                                        const t = i / bufferLength;
                                        const value = (dataArray[i] - 128) / 128;
                                        const angle = t * Math.PI * 2 + time * 0.6;
                                        const r = 140 + tilt * 25 + value * 50;
                                        // Tilted 90 degrees
                                        const x = centerX + Math.cos(angle) * r * 0.4;
                                        const y = centerY + Math.sin(angle) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.closePath();
                                    ctx.strokeStyle = sound.color + '99';
                                    ctx.stroke();
                                }
                                break;

                            case 'Neptune':
                                // Deep, mysterious flowing forms
                                for (let flow = 0; flow < 5; flow++) {
                                    ctx.beginPath();
                                    for (let i = 0; i < bufferLength; i += 3) {
                                        const t = i / bufferLength;
                                        const value = (dataArray[i] - 128) / 128;
                                        const angle = t * Math.PI * 3 + time * 0.3 + (flow * Math.PI * 2 / 5);
                                        const depth = Math.sin(t * 5 + time + flow) * 40;
                                        const r = 160 + value * 100 + depth;
                                        const x = centerX + Math.cos(angle) * r;
                                        const y = centerY + Math.sin(angle) * r;
                                        if (i === 0) ctx.moveTo(x, y);
                                        else ctx.lineTo(x, y);
                                    }
                                    ctx.strokeStyle = sound.color + 'bb';
                                    ctx.lineWidth = 2.5;
                                    ctx.stroke();
                                    ctx.lineWidth = 2;
                                }
                                break;
                        }

                    } else {
                        // Wave mode
                        ctx.beginPath();
                        const sliceWidth = canvas.width / bufferLength;
                        let x = 0;

                        for (let i = 0; i < bufferLength; i++) {
                            const v = dataArray[i] / 128.0;
                            const y = (v * canvas.height) / 2 + soundIndex * 50;

                            if (i === 0) ctx.moveTo(x, y);
                            else ctx.lineTo(x, y);

                            x += sliceWidth;
                        }
                        ctx.stroke();

                        // Frequency bars
                        sound.analyser.getByteFrequencyData(dataArray);
                        const barWidth = canvas.width / bufferLength;
                        x = 0;

                        for (let i = 0; i < bufferLength; i += 8) {
                            const barHeight = (dataArray[i] / 255) * (canvas.height / 2);
                            const y = canvas.height / 2 - barHeight / 2 + soundIndex * 20;

                            ctx.fillStyle = sound.color + '66';
                            ctx.fillRect(x, y, barWidth * 4, barHeight);
                            x += barWidth * 8;
                        }
                    }

                    ctx.globalAlpha = 1;
                });
            }

            draw();
        }

        function clearWaves() {
            ctx.fillStyle = 'rgba(10, 10, 20, 1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function saveArt() {
            const link = document.createElement('a');
            link.download = `planetary-soundwaves-${Date.now()}.png`;
            link.href = canvas.toDataURL();
            link.click();
        }

        function toggleGeometry() {
            geometricMode = !geometricMode;
            const btn = document.getElementById('geoBtn');
            btn.textContent = geometricMode ? 'Geometric' : 'Wave';
        }

        window.addEventListener('resize', () => {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        });

        init();
    </script>
</body>
</html>